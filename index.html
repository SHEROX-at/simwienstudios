<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Auto Wartungsplaner</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 0;
      background-color: #f4f4f4;
      color: #333;
      display: flex;
      align-items: center;
      justify-content: center;
      height: 100vh;
    }
    .container {
      max-width: 400px;
      background: #fff;
      padding: 20px;
      border-radius: 10px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
      text-align: center;
    }
    h1, h2 {
      margin-bottom: 20px;
    }
    input, button, select {
      width: 100%;
      padding: 10px;
      margin-top: 10px;
      border: 1px solid #ccc;
      border-radius: 8px;
      font-size: 1rem;
    }
    button {
      background-color: #007aff;
      color: #fff;
      cursor: pointer;
      border: none;
    }
    button:hover {
      background-color: #005bb5;
    }
  </style>
</head>
<body>
  <div class="container" id="stepContainer">
    <h1>Willkommen!</h1>
    <p>Wie heißt du?</p>
    <input type="text" id="username" placeholder="Dein Name">
    <button onclick="nextStep()">Weiter</button>
  </div>

  <script>
    let userData = {};
    let step = 0;
    let serviceIndex = 0;
    const services = [
      { key: 'oilLast', label: 'Motoröl', unit: 'km', interval: 15000 },
      { key: 'fuelLast', label: 'Kraftstofffilter', unit: 'km', interval: 30000 },
      { key: 'brakeLast', label: 'Bremsflüssigkeit', unit: 'Datum', interval: '2 Jahre' },
      { key: 'airLast', label: 'Luftfilter', unit: 'km', interval: 20000 },
      { key: 'steeringLast', label: 'Servolenkungsöl', unit: 'km', interval: 50000 },
      { key: 'beltLast', label: 'Zahnriemen', unit: 'km', intervalSelect: [90000,120000,150000] }
    ];

    function nextStep() {
      const container = document.getElementById('stepContainer');

      if(step === 0) {
        userData.name = document.getElementById('username').value || "Gast";
        step++;
        container.innerHTML = `<h2>Hallo ${userData.name}!</h2><p>Füge dein Auto hinzu.</p><input type='text' id='carName' placeholder='z.B. VW Golf'><button onclick='nextStep()'>Weiter</button>`;
      } else if(step === 1) {
        userData.car = document.getElementById('carName').value || "Unbekanntes Auto";
        step++;
        container.innerHTML = `<h2>${userData.car}</h2><p>Möchtest du technische Daten hinzufügen? (optional)</p><button onclick='addTech()'>Ja</button><button onclick='skipTech()'>Überspringen</button>`;
      }
    }

    function addTech() {
      const container = document.getElementById('stepContainer');
      step++;
      container.innerHTML = `<h2>Technische Daten</h2><p>Kilometerstand?</p><input type='number' id='kmStand'><button onclick='startServiceFlow()'>Weiter</button>`;
    }

    function skipTech() {
      const container = document.getElementById('stepContainer');
      step++;
      container.innerHTML = `<h2>Kilometerstand?</h2><input type='number' id='kmStand'><button onclick='startServiceFlow()'>Weiter</button>`;
    }

    function startServiceFlow() {
      userData.km = parseInt(document.getElementById('kmStand').value) || 0;
      serviceIndex = 0;
      askNextService();
    }

    function askNextService() {
      const container = document.getElementById('stepContainer');
      if(serviceIndex >= services.length) {
        finish();
        return;
      }
      const s = services[serviceIndex];
      if(s.unit === 'Datum') {
        container.innerHTML = `<h2>${s.label}</h2><p>Wann wurde der letzte Wechsel gemacht?</p><input type='date' id='serviceInput'><button onclick='saveService()'>Weiter</button>`;
      } else if(s.intervalSelect) {
        container.innerHTML = `<h2>${s.label}</h2><p>Bei wie viel km war der letzte Wechsel?</p><input type='number' id='serviceInput'><p>Wähle Intervall:</p><select id='intervalSelect'>${s.intervalSelect.map(i=>`<option value="${i}">${i} km</option>`).join('')}</select><button onclick='saveService(true)'>Weiter</button>`;
      } else {
        container.innerHTML = `<h2>${s.label}</h2><p>Bei wie viel km war der letzte Wechsel?</p><input type='number' id='serviceInput'><button onclick='saveService()'>Weiter</button>`;
      }
    }

    function saveService(hasInterval) {
      const s = services[serviceIndex];
      if(s.unit === 'Datum') {
        userData[s.key] = document.getElementById('serviceInput').value;
      } else {
        userData[s.key] = parseInt(document.getElementById('serviceInput').value) || 0;
      }
      if(hasInterval) {
        userData['beltInterval'] = parseInt(document.getElementById('intervalSelect').value);
      }
      serviceIndex++;
      askNextService();
    }

    function finish() {
      localStorage.setItem('wartungsDaten', JSON.stringify(userData));
      const container = document.getElementById('stepContainer');
      const km = userData.km;
      const nextBrake = new Date(userData.brakeLast);
      nextBrake.setFullYear(nextBrake.getFullYear()+2);
      container.innerHTML = `<h2>Übersicht</h2>
        <p>Ölwechsel in ${15000 - (km - userData.oilLast)} km</p>
        <p>Kraftstofffilter in ${30000 - (km - userData.fuelLast)} km</p>
        <p>Bremsflüssigkeit am ${nextBrake.toLocaleDateString()}</p>
        <p>Luftfilter in ${20000 - (km - userData.airLast)} km</p>
        <p>Servolenkungsöl in ${50000 - (km - userData.steeringLast)} km</p>
        <p>Zahnriemen in ${userData.beltInterval - (km - userData.beltLast)} km</p>`;
    }
  </script>
</body>
</html>
